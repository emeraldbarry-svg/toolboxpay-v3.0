<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Toolbox Pay | New Record</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --t-orange: #FF9500; --t-midnight: #141D36; }
        * { border: none !important; box-shadow: none !important; outline: none !important; }
        
        body { 
            background-color: var(--t-midnight); 
            color: #FFFFFF; 
            font-family: sans-serif; 
            margin: 0; 
            padding: 20px; 
            display: flex; 
            flex-direction: column; 
            align-items: center;
        }

        .app-shell { width: 100%; max-width: 480px; }

        /* BRANDING - NO BOXES */
        .brand-area { text-align: center; padding: 40px 0; }
        .t-bold { font-size: 42px; font-weight: 900; color: var(--t-orange); text-transform: uppercase; }
        .p-white { font-size: 42px; font-weight: 900; color: #FFFFFF; text-transform: uppercase; }

        /* INPUTS AT TOP */
        .input-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .label { font-size: 11px; font-weight: 700; color: #94A3B8; text-transform: uppercase; margin-bottom: 10px; display: block; }
        
        .field {
            background: #0F172A; 
            border-radius: 12px; 
            color: #FFFFFF; 
            padding: 15px; 
            width: 100%;
            margin-bottom: 20px;
        }

        /* PRICE AT BOTTOM */
        .price-card {
            background: #1E293B;
            border: 2px solid var(--t-orange) !important;
            border-radius: 24px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
        }
        .price-text { font-size: 60px; font-weight: 900; }

        .btn-action { background: var(--t-orange); color: #000; font-weight: 900; padding: 20px; border-radius: 15px; width: 100%; font-size: 18px; cursor: pointer; }
        
        .nav-exit { color: #64748B; text-decoration: underline; display: block; text-align: center; margin-top: 30px; font-size: 12px; font-weight: 700; }
    </style>
</head>
<body>

    <div class="app-shell">
        <div class="brand-area">
            <span class="t-bold">TOOLBOX</span><span class="p-white">PAY</span>
        </div>

        <div class="input-card">
            <span class="label">Customer / Site</span>
            <input type="text" class="field" placeholder="Client name">

            <div style="text-align: center; padding: 20px;">
                <button id="mic" onclick="toggleMic()" style="font-size: 40px; background: none; border: 2px solid #FF9500 !important; border-radius: 50%; width: 80px; height: 80px;">üéôÔ∏è</button>
                <p class="label" style="margin-top: 10px;">Tap to Record Labour</p>
            </div>

            <span class="label">Job Notes</span>
            <div id="notes" class="field" style="min-height: 100px; color: #94A3B8;">...waiting</div>
        </div>

        <div class="price-card">
            <span class="label" style="color: #FF9500;">Total to Charge</span>
            <div class="price-text">¬£<span id="total">0.00</span></div>
        </div>

        <button class="btn-action">Finalise & Collect</button>

        <a href="dashboard.html" class="nav-exit">RETURN TO DASHBOARD</a>
    </div>

    <script>
        let rec; let active = false;
        if ('webkitSpeechRecognition' in window) {
            rec = new webkitSpeechRecognition();
            rec.continuous = true; rec.interimResults = true; rec.lang = 'en-GB';
            rec.onresult = (e) => {
                let t = '';
                for (let i = e.resultIndex; i < e.results.length; ++i) t += e.results[i][0].transcript;
                document.getElementById('notes').innerText = t;
                const n = t.match(/\d+/g);
                if (n) document.getElementById('total').innerText = parseFloat(n[n.length-1]).toFixed(2);
            };
        }
        function toggleMic() {
            if(!active) { rec.start(); active = true; document.getElementById('mic').style.background = "#FF9500"; }
            else { rec.stop(); active = false; document.getElementById('mic').style.background = "none"; }
        }
    </script>
</body>
</html>
