<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <title>toolboxpay v19.0 - DESKTOP FIX</title>
    <style>
        /* Forces a dark background so you can see if the update worked */
        html, body { background: #111; margin: 0; height: 100%; display: flex; justify-content: center; align-items: center; font-family: sans-serif; }
        
        /* The "Phone" frame for your laptop screen */
        #mobile-frame { 
            background: white; 
            width: 380px; 
            height: 80vh; 
            border-radius: 15px; 
            box-shadow: 0 0 40px rgba(0,0,0,0.7); 
            padding: 25px; 
            overflow-y: auto; 
            position: relative;
        }

        .logo { color: #ff6600; font-weight: 900; font-size: 24px; text-align: center; margin-bottom: 30px; }
        .logo span { color: #000; }

        /* Solid block buttons to prevent the "ghosting" seen in your screenshots */
        .tile { width: 100%; padding: 20px; margin-bottom: 12px; background: #f4f4f4; border: 1px solid #ddd; border-radius: 8px; font-size: 16px; font-weight: bold; text-align: left; color: #ff6600; cursor: pointer; display: block; }
        .tile-org { background: #ff6600; color: white; border: none; text-align: center; }
        .back-link { width: 100%; padding: 10px; margin-bottom: 20px; background: #fff; border: 1px solid #ff6600; color: #ff6600; font-weight: bold; cursor: pointer; border-radius: 5px; }

        input, textarea, select { width: 100%; padding: 15px; margin: 10px 0; border: 1px solid #ccc; border-radius: 6px; font-size: 16px; box-sizing: border-box; }
        .price { text-align: right; font-size: 32px; font-weight: 900; color: #ff6600; margin: 20px 0; }
    </style>
</head>
<body>

    <div id="mobile-frame">
        <div class="logo">toolbox<span>pay</span></div>
        <div id="app-content">
            </div>
    </div>

    <script>
        const KEY = "v19_";

        // This function WIPES the screen before loading a new one
        function show(screen) {
            const container = document.getElementById('app-content');
            container.innerHTML = ""; // This kills the "ghosting" from your screenshot

            if(screen === 'menu') {
                container.innerHTML = `
                    <button class="tile" onclick="show('quote')">NEW QUOTE →</button>
                    <button class="tile" onclick="show('history')">HISTORY →</button>
                    <button class="tile" onclick="show('setup')">BUSINESS SETUP →</button>
                    <button class="tile" onclick="show('bank')">BANK DETAILS →</button>
                `;
            } 
            else if(screen === 'quote') {
                container.innerHTML = `
                    <button class="back-link" onclick="show('menu')">← BACK</button>
                    <input type="text" id="in-n" placeholder="Client Name">
                    <input type="number" id="in-h" placeholder="Hours" oninput="math()">
                    <input type="number" id="in-r" placeholder="Rate" oninput="math()">
                    <input type="number" id="in-m" placeholder="Materials" oninput="math()">
                    <div id="in-t" class="price">£0.00</div>
                    <button class="tile tile-org" onclick="save()">SAVE QUOTE</button>
                `;
            }
            else if(screen === 'setup') {
                container.innerHTML = `
                    <button class="back-link" onclick="show('menu')">← BACK</button>
                    <select id="set-c" onchange="localStorage.setItem('${KEY}cur', this.value)">
                        <option value="£">GBP (£)</option>
                        <option value="$">USD ($)</option>
                        <option value="€">EUR (€)</option>
                    </select>
                    <input type="text" id="set-bn" placeholder="Business Name" oninput="localStorage.setItem('${KEY}bn', this.value)" value="${localStorage.getItem(KEY+'bn')||''}">
                    <textarea id="set-ba" placeholder="Address" oninput="localStorage.setItem('${KEY}ba', this.value)">${localStorage.getItem(KEY+'ba')||''}</textarea>
                `;
            }
        }

        function math() {
            var s = localStorage.getItem(KEY+'cur') || '£';
            var h = Number(document.getElementById('in-h').value) || 0;
            var r = Number(document.getElementById('in-r').value) || 0;
            var m = Number(document.getElementById('in-m').value) || 0;
            document.getElementById('in-t').innerText = s + ((h*r)+m).toFixed(2);
        }

        function save() {
            var jobs = JSON.parse(localStorage.getItem(KEY+'data') || '[]');
            var total = document.getElementById('in-t').innerText;
            jobs.unshift({n: document.getElementById('in-n').value, t: total, d: new Date().toLocaleDateString()});
            localStorage.setItem(KEY+'data', JSON.stringify(jobs.slice(0,20)));
            show('menu');
        }

        // Start the app on the menu
        window.onload = () => show('menu');
    </script>
</body>
</html>
