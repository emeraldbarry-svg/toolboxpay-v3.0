<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>toolboxpay - v19.7 Calc</title>
    <style>
        /* CORE STYLES [cite: 2020-02-20, 2026-02-21, 2026-02-28] */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { background-color: #111; color: #fff; font-family: sans-serif; overflow-x: hidden; }

        .app-shell { width: 100%; max-width: 480px; margin: 0 auto; background-color: #4a4a4a; min-height: 100vh; display: flex; flex-direction: column; }
        header { padding: 25px; text-align: center; border-bottom: 4px solid #ff6600; background: #4a4a4a; }
        .logo { font-size: 26px; font-weight: 900; text-transform: uppercase; }
        .logo span { color: #ff6600; }

        /* NAV RIBBON [cite: 2026-02-28] */
        nav { background: #222; border-bottom: 2px solid #333; overflow-x: auto; }
        .nav-inner { display: flex; padding: 15px; gap: 10px; width: max-content; }
        .nav-btn { width: 110px; background: #333; color: #ff6600; padding: 15px 5px; border-radius: 12px; text-align: center; font-weight: 900; text-transform: uppercase; border: 2px solid #444; cursor: pointer; font-size: 12px; }
        .nav-btn.active { background: #ff6600; color: #fff; border-color: #fff; }

        /* CARDS [cite: 2026-02-28] */
        .content-area { padding: 20px; flex-grow: 1; }
        .card { background: #1e1e1e; padding: 25px; border-radius: 20px; border: 1px solid #000; width: 100%; margin-bottom: 20px; }
        .card-title { color: #ff6600; text-transform: uppercase; text-align: center; margin-bottom: 20px; border-bottom: 2px solid #ff6600; padding-bottom: 10px; font-size: 18px; }

        /* FORMS [cite: 2026-02-28] */
        label { color: #ff6600; font-size: 11px; font-weight: 900; display: block; margin-bottom: 8px; text-transform: uppercase; }
        input { width: 100%; padding: 16px; background: #000; border: 1px solid #444; color: #fff; border-radius: 10px; margin-bottom: 20px; font-size: 16px; outline: none; }
        
        /* RESULTS GRID [cite: 2026-02-28] */
        .res-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px; }
        .res-box { background: #000; padding: 15px; border-radius: 10px; border: 1px solid #333; text-align: center; }
        .res-val { font-size: 18px; font-weight: 900; margin-top: 5px; }

        .tab-view { display: none; }
        .tab-view.active { display: block; }
    </style>
</head>
<body>

<div class="app-shell">
    <header><div class="logo">TOOLBOX<span>PAY</span></div></header>

    <nav>
        <div class="nav-inner">
            <div id="btn1" class="nav-btn" onclick="tab(1)">Profile</div>
            <div id="btn2" class="nav-btn" onclick="tab(2)">Bank</div>
            <div id="btn3" class="nav-btn" onclick="tab(3)">VAT</div>
            <div id="btn4" class="nav-btn active" onclick="tab(4)">Biz Calc</div>
        </div>
    </nav>

    <main class="content-area">
        <div id="view1" class="tab-view">
             <div class="card"><h2 class="card-title">Profile</h2><input type="text" id="f1" placeholder="Business Name" oninput="sv('f1')"></div>
        </div>
        <div id="view2" class="tab-view">
             <div class="card"><h2 class="card-title">Bank</h2><input type="text" id="f4" placeholder="Bank Name" oninput="sv('f4')"></div>
        </div>

        <div id="view3" class="tab-view">
            <div class="card">
                <h2 class="card-title">VAT Quick Calc</h2>
                <label>Amount (£)</label>
                <input type="number" id="vIn" placeholder="0.00" oninput="vCalc()">
                <div class="res-grid">
                    <div class="res-box"><div style="color:#ff6600; font-size:10px; font-weight:900;">VAT (20%)</div><div id="vTax" class="res-val">£0.00</div></div>
                    <div class="res-box"><div style="color:#ff6600; font-size:10px; font-weight:900;">GROSS</div><div id="vTotal" class="res-val" style="color:#25D366;">£0.00</div></div>
                </div>
            </div>
        </div>

        <div id="view4" class="tab-view active">
            <div class="card">
                <h2 class="card-title">Profit Calculator</h2>
                <label>Labour Cost (£)</label>
                <input type="number" id="cLab" placeholder="0.00" oninput="bCalc()">
                <label>Material Cost (£)</label>
                <input type="number" id="cMat" placeholder="0.00" oninput="bCalc()">
                <label>Markup (%)</label>
                <input type="number" id="cMark" value="20" oninput="bCalc()">
                
                <div class="res-grid" style="grid-template-columns: 1fr;">
                    <div class="res-box" style="border-color: #ff6600;">
                        <div style="color:#ff6600; font-size:10px; font-weight:900;">Recommended Quote (Ex. VAT)</div>
                        <div id="rQuote" class="res-val" style="font-size: 24px;">£0.00</div>
                    </div>
                </div>
                <div class="res-grid">
                    <div class="res-box"><div style="color:#ff6600; font-size:10px; font-weight:900;">Total Profit</div><div id="rProf" class="res-val" style="color:#25D366;">£0.00</div></div>
                    <div class="res-box"><div style="color:#ff6600; font-size:10px; font-weight:900;">Margin</div><div id="rMarg" class="res-val">0%</div></div>
                </div>
            </div>
        </div>
    </main>
</div>

<script>
    function tab(n) {
        document.querySelectorAll('.tab-view').forEach(v => v.classList.remove('active'));
        document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
        document.getElementById('view' + n).classList.add('active');
        document.getElementById('btn' + n).classList.add('active');
    }

    function sv(id) { localStorage.setItem('TBOX_' + id, document.getElementById(id).value); }

    function vCalc() {
        let n = parseFloat(document.getElementById('vIn').value) || 0;
        document.getElementById('vTax').innerText = "£" + (n * 0.2).toFixed(2);
        document.getElementById('vTotal').innerText = "£" + (n * 1.2).toFixed(2);
    }

    /* BUSINESS LOGIC [cite: 2026-02-28] */
    function bCalc() {
        let lab = parseFloat(document.getElementById('cLab').value) || 0;
        let mat = parseFloat(document.getElementById('cMat').value) || 0;
        let mark = (parseFloat(document.getElementById('cMark').value) || 0) / 100;
        
        let cost = lab + mat;
        let quote = cost * (1 + mark);
        let profit = quote - cost;
        let margin = quote > 0 ? (profit / quote) * 100 : 0;

        document.getElementById('rQuote').innerText = "£" + quote.toFixed(2);
        document.getElementById('rProf').innerText = "£" + profit.toFixed(2);
        document.getElementById('rMarg').innerText = margin.toFixed(0) + "%";
    }

    window.onload = function() {
        ['f1', 'f4'].forEach(id => {
            let val = localStorage.getItem('TBOX_' + id);
            if (val) document.getElementById(id).value = val;
        });
    };
</script>

</body>
</html>
