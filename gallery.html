<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Gallery | Toolbox Pay</title>
    <link rel="stylesheet" href="src/index.css">
    <style>
        .page-container { width: 95%; max-width: 600px; padding: 40px 20px; }
        .logo-text { font-size: 24px; font-weight: 800; text-align: center; margin-bottom: 30px; }
        .orange { color: #FFA500; }
        .white { color: #FFFFFF; }

        .gallery-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); 
            gap: 15px; 
            margin-top: 20px; 
        }

        .gallery-item { 
            background: #1a1a1a; 
            border-radius: 15px; 
            overflow: hidden; 
            border: 1px solid rgba(255, 165, 0, 0.2);
            transition: 0.3s;
        }
        
        .gallery-item:hover {
            border-color: #FFA500;
            transform: scale(1.02);
        }

        .gallery-img { 
            width: 100%; 
            height: 180px; 
            object-fit: cover; 
            display: block;
        }

        .gallery-info { padding: 12px; }
        .proj-name { font-size: 14px; font-weight: 700; color: #fff; display: block; }
        .proj-date { font-size: 11px; color: #888; text-transform: uppercase; }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #444;
            border: 2px dashed #222;
            border-radius: 20px;
        }
    </style>
</head>
<body>

    <div class="page-container">
        <div class="logo-text"><span class="orange">toolbox</span><span class="white">pay</span></div>
        
        <header style="margin-bottom: 25px;">
            <h2 class="orange-glow" style="margin: 0; font-size: 22px;">Project Gallery</h2>
            <p style="color: #888; font-size: 13px;">Showcasing your completed labour and craft.</p>
        </header>

        <div id="galleryContainer" class="gallery-grid">
            </div>

        <a href="index.html" style="display: block; text-align: center; margin-top: 40px; color: #888; text-decoration: none; font-size: 14px;">‚Üê Back to Dashboard</a>
    </div>

    <script>
        function renderGallery() {
            const history = JSON.parse(localStorage.getItem('quoteHistory')) || [];
            const container = document.getElementById('galleryContainer');
            
            // Filter only for jobs that have a photo and are marked as complete
            const completedJobs = history.filter(job => job.photo && job.workStatus === 'Complete');

            if (completedJobs.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="grid-column: 1 / -1;">
                        <span style="font-size: 40px;">üì∏</span>
                        <p>No completed project photos yet.<br>Complete a job in the dashboard to see it here.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = completedJobs.reverse().map(job => `
                <div class="gallery-item">
                    <img src="${job.photo}" class="gallery-img" alt="Project Photo">
                    <div class="gallery-info">
                        <span class="proj-name">${job.name}</span>
                        <span class="proj-date">${job.date}</span>
                    </div>
                </div>
            `).join('');
        }

        renderGallery();
    </script>
</body>
</html>
